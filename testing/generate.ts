import { Barretenberg, RawBuffer, UltraHonkBackend } from "@aztec/bb.js";
import verificationCircuit from "./zkpassport.json" assert { type: "json" };
import { CompiledCircuit, Noir } from "@noir-lang/noir_js";

// Your proof data
const proofData = {
  proof:
    "000001d70baa94f5678c5585e73ea7398a2415b261448d6843ae0f0b25fc91813adb1acc115fad403d6d2c16659cfa1f8ebba00fb55d9bfa70f17c33d786f6c6b8ba7cf70000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000320000000000000000000000000000000000000000000000000000000000000035000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000360000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000003100ebffe05257eaa6dba9c761bf4ac6279b404f69fe61a921a5a7aaa51d32479a007fdc3e8038e87ff56a0e429878710670c2b28ceaf3ece041f2e7e7866b002a004b4e0316d342fc4b1ce7a06838f73342d2f0c59794d925e9f6f35ea2b6513900655485db0fb0430a9c87b87f842b8b7d53f2c6c4a783c7bde4515a5a4c0b810000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000003025190cd66b9323c0000000000000000000000000000000000000000000000012ffde211aae44a9100000000000000000000000000000000000000000000000dab992344fc5983f50000000000000000000000000000000000000000000000000002f0ab60fd6e3b00000000000000000000000000000000000000000000000334edb5a97e3c97ab0000000000000000000000000000000000000000000000032d798f73133fe9da00000000000000000000000000000000000000000000000145db55c6e9bb92f30000000000000000000000000000000000000000000000000001f1c3036436890000000000000000000000000000000000000000000000089f7fb308ea91b22500000000000000000000000000000000000000000000000f448f89e1007f0a4b000000000000000000000000000000000000000000000006dcd3109e5f8fa62500000000000000000000000000000000000000000000000000021dc21a4d5b1d0000000000000000000000000000000000000000000000038759d760d5abfccb00000000000000000000000000000000000000000000000a01ff4e46750124930000000000000000000000000000000000000000000000067236be0160c5c36b00000000000000000000000000000000000000000000000000008470d2ddd92c00000000000000000000000000000042b3907a5776719edf5b9867d6e2cb907400000000000000000000000000000000002ea959a35302ffbb7d1c1d24537999000000000000000000000000000000da952963ed2f3183e73f299df9228835e9000000000000000000000000000000000004ab1cbcabb25064e689c0b47b505f000000000000000000000000000000af70d971a49817605f164889edcfae075d00000000000000000000000000000000002364d08b44fa0574aae1519d15dd3b00000000000000000000000000000091aa99a4de0cfcd069c2fd5736f8ea64d000000000000000000000000000000000000305fedb51590aad6db13c2a896a9b00000000000000000000000000000043222181c0e12f7ca83101a41119397af4000000000000000000000000000000000009fc16450903b4c41f961253989cea0000000000000000000000000000009030c18ffcaa760759d3a40144cd5094b500000000000000000000000000000000002268844d2fe0210ac43e2a2556d4260000000000000000000000000000007f8ac3fd8b11db1bbdeb99908995b9aa9600000000000000000000000000000000001131f12b9d0f37947ceb6d440a8d000000000000000000000000000000005a9d66bda0d25f7dce01ee4894c2f3e297000000000000000000000000000000000019efd4db2f9dcc5c5d5fc92488fe1f0000000000000000000000000000007f8ac3fd8b11db1bbdeb99908995b9aa9600000000000000000000000000000000001131f12b9d0f37947ceb6d440a8d000000000000000000000000000000005a9d66bda0d25f7dce01ee4894c2f3e297000000000000000000000000000000000019efd4db2f9dcc5c5d5fc92488fe1f00000000000000000000000000000059f9c2c20b2b566c4b08339f316109fe3e000000000000000000000000000000000012f85e0592656becdde4a6b2db89d0000000000000000000000000000000a0a4483ab86fed09eec61345dfcac07e6000000000000000000000000000000000001a9b56f90ccad4aece73f13f52a7130000000000000000000000000000002f1341857d69bd7b9ff4a085ba1f335f8e00000000000000000000000000000000002962acc9e320491efa64009e59692a000000000000000000000000000000ff995d5b5fa66544e765485614a194898c00000000000000000000000000000000002895fa80d9d65a967b409f7cf69e53000000000000000000000000000000ff90e3089b46cc9686e4554225d6a2be1200000000000000000000000000000000000d4ee6118a5fe4590c0bef42283556000000000000000000000000000000c63ce6e9499bd449efe153ccbe1e59461500000000000000000000000000000000002ae7c0b4d99a1c0aed174b33c80eeb131f946703787b125e402f66a3b596d296981ca8e4503a279ba983c2d9b20a2a1d44ba0bddb925175a10164fddcbc18a919bcb9f95693669a83871d1164df5d72f9a5f78de9b22cd99d465c62a4ba6ca7c760a4828f5c41daad9270a76484972191141144e8008ae8250d5bde5d9e44c16a41c7d162b93b160cc6919a2207bad0c1ccf019cb5aeb2b5aacead1aa7aa8d2bd81439124234d62209c715bb2bfdeb022f40668b5dc9361da4fb6a6c302bce5591c9d5e1ec00be719c00ed967205b426e94934621ebb7783015b986f5ae3d34332adb364e3d497d84166264bbf6835285d35a3f34c43f312cd265ca1c22fcfc62d192bcc9b07e7d1ee2a0a07e0039029aee1ba661dc57602f00a39e0f082e53acc14f18ea62e5f5e53b7899a498b632a35110b24dfb7bf4e5ef264576c9366f8e45f6e007b7009a4a9d3b0303f568c1b3b30959a4acebd160a29b1b9a932b03e9aa358c14d0cc68c6d0df63fa1d04700e62994f3ef2ecd629bc7a7ebd21306f3526e58af759ae223575e9990369d7429e32e3efded84f425ce2af89b98bedbc8b62e3128da3a8ea20b2acab0114d752219ea4048634c1a25814798bdf559fe99eebccccce9156283ba6a4ae30816d7212961e2b3517df61e83e658de3e7ff45a9761b2fcfad8d4b93ca5587d2a92181007398503012f4ccc86d5f8734416f5e832c80291f204a60b8881550ef202350a1f1b4117fb315081636a0c67f505b3b1443125c3f9c3418c975f712f4b8679249438436a4c952e5749ee8fc4ca0691b974bd1a08efcb19cd4797cbabf92a481dc3b55628d3700a133f1d6cebbdb11b5fcf31391048dd40b048ba6f0ecd9f1f2ea206eee5dc57eac5afd370a399bf3779e95adc7c8e87cbfd5fa8b23b70ea642d6d0560fda90c480641fda1e6c6a8a84a594cc4001b3ab04f6dc4a164011ea2238f737c5959edb40592f734dbac120cdc336c04df38e1052da1174b513cf2bd1d02cd57fde2d38e7522394f661cf2208c3a30476e3026932b9bd8e6dce3a15d0a89b2c5cdec913b8e5c80a4292d9aa6f91baad59d51c4e7931a13a5ad18f7e6014706476dbd5a1baec4cdc03de493b38a6fe77e7efe7f0c2da261b6aaa86d5907cce761d333945cc523b6e16bff8b5c8265ca27e3a1d1ba3405b69bdb5e8bb710c92d29ebaeb73c1f2527189975fe5b024389cc1e62e569cb0eb8ec43738d7b0467146c3ae510211263d02bee111367a5e2b1dd4b49a8be16cac33294dc6ff01a021466dab13b2eeb46830bbfb080ffd4e11ec5670809374f1d6eb33e0879562246beaca565eca2d0ca1a4bd748357670abf7f9ab66651a1a10952314d609fe1b8dea287205148059e1c5528396e82f0324616dc9bf770dd7acf40a2b481a5f244825507a90f92347ec0983404ca590d1a74e08a69a2214746eeda7d139cd160261dc5bcba6ad29c4a258b29b7dc0be99b3e7dc85bf24fa014493378e6eef6718cbda81cff1f8223568df8e6c70b514654c0acfbb2d2b8d44dd52b92a1f0cbe1d339bf7f0906b83b4e3d19907280db7472a63736a1be7f483dca544c8f84c451e99af5c23b9c1eb498053191c7400cd1be8e90ff954da3ae831565b2879af6b12f04fedac5e0954ab92931ac9f62c52aaca50b62a1e0755ea0f26917a3a993f13b4da01475b6854507d46161641703043f12fbff329d0f7c701e421d2417151128674c09a2a87102c890867c60b2ccc5255c11ed994feee7832010699b3b91812a329f1f18955a89875e4f13ceba03acd6d65a59391c7073d107b83d31ebe821e84ff9b0c245b65425e495ea285a0f6390a6e184f550d995e826d5127071add1be1c0be2a35a447b03677045633105a13741ff7e0be39747f2a28c49a3251b818b07396a018d55561891bf0b0ab493d71e1359ec416803649740f5803c5850e180c0d3e64dad0908fe74f13bc17db5d6f03234bddcb61dd352d3ce844ccbb0b1d01a1614d7cc490e27f92844cfd93f359321820b70506ffb14d01cbbef156a32b611ad4526058d774fd6b659b7712e271f955e62969450d229183255297d7dc1ba3ee78295b8e49addf8b395a03555436ba91688f1336c834bda6b78924fae02048013d020f7918da8dd255751f98da629c7029dc06633ffc96ba665186e3520beaa17e4a35f906471203db9d5c4d2dc35cd61af03abf2ef8d0ab31c2ad7d39142cca665ae8aa30af53220c77b831c0a16d4c4afbe405fc43ce5c66c9f7e9241d562d831261e58299cf1943426a1b5a94f8df122dfbe526cf8737a5603ef5d61da76b029916b5ecf16d1a957bb23370b20b0c77e209fb53e4e822307b076046052f6bdb9f0720eed523d0857b1f08659098682f1d75b24996ac793feadff0e8134acb3b7f000207298904c768f10f7096ac3ad15136020b278bfc1dea2284d82e0111a2e095dc509befbff840dc15a402eec04ae207fd3413d92913bff347840cc492461ddd8370192ae15390b7e5512c990075c4b47ef544f73693a080eb0f17ad114f4e45565622a7598056a3f9777cb2da1f2678a5bdc3969a0e0d9ad78723928ebedfccc1e19ec8488ecf33ce6f402e2469626d59eb29754edde825010d2e35f14c6afcb1666b00b9ee7a986223d299d0185cc571f614bc3a9ae71dd25c193b97e72da7e41ab9bd8d3c179cc3fb6566e5497f35793056a532489c0ca32700bcd43e65be5b147f56903ad96291e42ab1ae53460a33f90379e937617f43341bfc4a57ea116eb55255a0f38e7fa466c3cbec74ba4d9ae701b0abe64be60caf1ad1f70d2b8db2c3384ebaef2ca47a0bd6dcf8a1e28d9054a952b714bac7e1f530215d38f552461b02d28efa6c3661b0b1c167614a69ec75849832cad25ffa4b13c7937a48e461bd853da48c9a1e5e3a42e3d021b91ad567b4eb4513381fc36f08924c8ddb9b568063fa77e305a0d42674da9e2e056651f0e3c3072e08866fe412e95beee8bc42be68a90d17449b07ddae4f3128c3b72fda3cbe98cf21103d05079873e2708b81bce432dd9c39c7f685635346926bca6d570fe8fcb1658648761bf83158d9a5ca5cd6005c04de3fd1d69bd85c775bedeb654f249048355153872ef8110ef4256be73832af6e81d7cc040ae956d54c105085dfd62d6bad3c9da30192140b261fa64197cae732b639c44c8bf8a4390d9157ff7231ea71174f4a0a0235bd936635925e4401880fa56dec20e317f43fd1019a878a226ec7e39eba361be6be6d66653206acb82541e3499e31ee2d09333ec51639f45909fbe7b1767d03032e9525f2161ef5aad2b5d11bd39601d315483042a5f1d523ba1ed73651e320e7e30788c7ed13c86b7555984348bcad3b15649c208ee82d749e461cdb948b2529f3abf024bc767a0e77b38cfbaa4ef54a24bf4b921f40b9c3fd0085e4ac382ab810715614c9cda461e86b55efd3070b2cb32aa55ea41601be531e4a45e9d51f0f8ae74a5ead4e3159cbb5b2f4bf5d30b4df004c87cf3298a1da7031c23e2c22dc557057aa4950eaa05042b4b3d4bca7a80331877dac8dd36d199e0836bff81654904fd43e78f344294427b3e9cad9a47d97979f059b9becc9a706e4affc60052fca6e3fd123b288c1e778680dc0814491ce2e77dacaefb884e10eaed30a4026436c3cf3012707c35445cc5eae1b4a1db100f92b8583a6a057f8ebaf39d48e2ef4a819ccc6f8fb3f65486d5e545db4743be1671a157e17467406e33ba560000bd7f5d9e12a47e7663315e0007c39115f42d52d556a950818841fbf36b88f1814cf762a2b9e4ccb14686f9d0a26e98975352981c2d5e06e75cdd4189d7fd5a81af9e3070cebc9a7f3c2d5007b2c4358c1a0230ad6da5fab35044c1f6c82e6d42f1d7c3df43d99a47435c1503740a40bfc2a8a414ab5cc34c13a44966ab9d63a1212418379b0bf34e41ec09e551d0062855d2156e47c86fb7e5d928c9543c07211b6ce9a6a8ec64df888bdf992d3658f357f0cee93b530ffe5889f2ac92828952ea19943cf059d1e55556b9adbf660736c02d1c38434918bbdeceb6ed068fa6006175d70e67337a670e94a8230d295f8d58a9f0f6b3ae76a007fa8b139b6097b0a9553333fd36079dbbf3305c163acc2c7e57bd8132c7fd2ec542594620678880e9671fea02f19aebc776ee094c728162a313cec7b3f9af866c90d8f8784e9fe08bf8c72b0a6df4d23ea6c696fd75b79f99ec9f8475cc007acf29416945c22690819ff12efeefd98e01d4a41ce990542afb08fc3c363ec13a492ce26a85b4aa925933d7c86c52c8b065e4215beadadd044135e07086f6142785ca8423e0ce91a1f1f96959e3f8184eca24920b863888d974ce0f1b05b630fa1de15450a8aa22523ded9826376b8eb09256fb5a4e5e359fbe28d885cdaf08745312d2f93774644223f43094df4fca23771274d63eeaee280137e053b6b3c23eafc4fd4b6f7530d21717a4c8772c7dce9ff62c309a35cfecbf23731dcb94cd22a09a2573f821fae28321a905635745665093422fe6caeef96dfc0d5836ea170f4def00a709c6fea18a70e0a68011b7c522444066f068825367b4a318eae2f9a4a4727d54287477b2bada06b629e20bcc4bc74938d5410a18d0cef89d6022daec09409a64a2539cb0b57952f10982fbdd45317bb761db0d1b97ef3ccc96703227ea6469fca73de651f25bff3ef03d54c6c3a802e6ad7ca910e33fc9b7bed473f1786a199006b5a521b9378a46e7a59fa74382044a78d34b318096c03c0cf0df770cb75ef754a4e7d2d7972631e8af42ffe48ae074f73522b681bbae83d2487ad372f866d05a3e0602ea3d0a74a8639e1b257c5fb9b4bcac3e846528a68410594779763a331cac98029f9f5d009a43ddd4ed2b5163d70f85a941c39a96d94638a761b0760102baf1b15013bd3bc8f8111abe44c5ed7c83c5f6cf11cc4517b225e6ccb616edfbfd737205f8eff590d92a5ef2f59cfe60ed65bd88e134a03ce81dff4a3504812be063c05a930e5e2f7edc53c9fd0d747f578702516434c090a206d6350ee39606e18af13a88be9c22b0455e3b47f7ba4d4e157613e9c09f117b589ba18bac45ca2b9980aa8bbc3a9f803b5b8cc5be1265099bbfc2ba57cea18d8a9d325e00d3547995d21bc7a773e7ecf61192bd9fb030a8c6bf838f3e07b3b9976f207d3eea197275b28cce876a1a304c31b6a2b5e6601fe57942b7cb29d6d8efe3eed5cf6d9f891e00808da2a9ec8995006e3e5f481ee6c18cc9888cde7170f26af993f83f2b573090fff0e82ee7570ec0f280712f82c360c7372a019345e12422899686d1d61b6dc193bf82ef8e4001776f7b49b4883f2a999ae04d32a9299f6e5361081483af8592da80ca8d197a8d27368c4eb07d41d6b06fb36ca4291708418c7d576c38087ae26651e98bb41a6711e5ff08b1bc90d0a26f2d3d0dfdaf7e1465b99588da1e50f2e09aee7cf903250f82bf172987d61e421ac035af5ac8c44bb14c4abec0db5981394c4d278f2683fb59357de20dcbf43d788ec17743651190954cd65d5586f990d87c7bd34ebce50c1d99ee39e7fd4360842e60e4bda14416998e5e87ee1faa818e8e4e6b5602ac511f70db180d66f797cbdff33bfd4b82ff9602ae4f672d8932b0339ba96d4f20bf7f3836889c8033877a4b8d09fa37ea0df5a901f69090ec00e8b937cd604c4cdf3313e3d5f71ee0fda2c9d0eebeb405e2e67ced813b0258d15f4320f2fbb2485f67544321f72ad18299653fcf8d250e48f9a8dcecf2df1cc035229448fb6a1e45dbf204a6b986df7c8a0cd43abb48698b1a410fc788b850909b80b811adcd86c3c0373bec00f730d019d568d9dc8c44306964a56b4c687b7255985f7125dbeec1ec7d268cb521ad2c4fa1353da35266e3141bf91c9ebe58508f91b071810ade1f77c8cd8a7b30c5384f8cda619ee4fec6ffe1e0e159888e30137735cc58b09d61fd19633c80ee6e3ae21f4689ba7ad0701a354d4525d6df71a993ab03f7dcf68f23393c690430877336acbdb891a39437c87e35f449711770e58ca9d2f80adfdac04a8b4b9b2416b226241fe0984c70c7c71aea1bb40b810098b44d9b953a7c413ef161aa6dc9165e7883b958a98467abd641f4743615b1317d7054240f2fd2bd253099aa37bd59c241e34c536f09b319f336b8a45c7bd8326f3930dfc71ea3a14681feefcd7e7fa4d9f58c6dddfaadf4080839f39bd25b30310fb1e1aa1d25208d99f2748274c8bc869db6ce2a3959c3869f9593488c53f15427fd37f2e6deb29c0eee4ec86b63f2be6a70632f665c9efa5d5b864763eed1459144ca711d9e1aa5867f7668b49178ad39c3ce404e16ea16bf75ea13b60cb29284389a8dc3b563542f413e8834051fdf55c447164d17b48238636a7438da81991ff24b5de931d3f01a6122443ccb7d4538400e6d26ec5c96a8afd3da6a09711c3e725fc067ce1db741a3cec6bd851c32880dedc74e2ac27031a6a6dfda8e22ab2af2c53fe8a5d63351fda7600af019932e288c86de3b57c6ab08861d8cebf027997c9140f42e36b555871e872f5b765544392e2644b3f0ac1e77fcf5d996f11f27f15a03f6e9694c8b1153af13c49024f978806c739464cffd1f21cddcd6511afc19e95467fa8c6c87b87d5acab9325b342e4e16fbcb6111ad7b4178fa1cd10a16c7b083eef2c93882bff6fb76da124f75cb1842c1f8bcf7b18e6e13ec46f168a3504c9dbdedcc6eb00b526913c360f8ea4ed68464407142cda0be14b10b727ae61060f6266071ce535951dc0f813c961d874983ad5ddb8b5d8e510d151c00785b2c042c002a697d14ba969478c3f3cc48125e667dc790b8fcafa3cc046db22a316fbf1536a14890636c93363db8de2c319d4e2fcca05187dcd69b4349b2101faa3ae52739d8291ed395cd1a28e63b072210032c2f615d46e9c8c0d4e830b07295361b0685c4a75a66b32c625586e41caf18491fe39ba3e1c3a2ec021e3b418b60a6d9734eefce2a0fac4f8a31b2cf8dcd5974f4e895d0b48df9f1340a16522290de47c3e1e0d284140566725869adcf14bd8909ef135dc5101078c8b05d628ee094d32ee495f4544483600293f2b00499727420d1ee1254452373e333e890d46ae1de3f5f0e44a61cf0c9ca3252c79d2dac1b868340da335ccbd288aecea2ee0fb6aa316347541db818d74bc5cdcc4d93abd7d13de57c9b52183cad291bd07666896b20a572253621c3889004d9995379508e23a0bd9dfaffb657f68f1411e0b16d4d6f05352b1dff315909c2b211318d02f5d6d94ee158220baa042273718f1a33b6b26a0c20672e14f5928655f5ebc1c93990c6fe7024f9254ee7d76611e3a4cde56e57ca7f20c5e1b177bb31b2bc8922b68604543678c455313b3a0150dd992f7fa1295c1264d90975152fde5f4fe9d1529c898bc226bdb794ec4797314aad16fd67b0013053abda4882f23c85b192ff595f13968772fff5d2d2b1d3e2c1f62483db5e355d2f921878259b045f8e6c63c912af3401cca087c5abcaa7f1bdb964442e6d8b5f2ca10497917687dc4c6239c879ab7031d0874c0a221ea660cff9bfb187ef0b41dcc9d2aa0fee7ab90cad91b9e47b9ba55eda7e9461a861d1e12391f2908d6f086be164477b749c87b4ec5e40b1e8e444018d986fc2b45811e1f15c56bbbf5f297a46f5d4707b480830f547e5dbf2f38a5abb811332d9fbe1aa36f7894ddaa5a195232fac227fc7293a7988337790f9edc1267ec7696a4bb27d93649185c5d19c9a8898d8d1136d77fb6746e4cc872b069ad3cd36287429b1d56cd6b66c00fa0238b90cba39b384359137ef0c21981835d2c7307c6449c8016af264f011a3dd4687fc727236f370429baebae06ef19d4611550d67dd0f2a620ae5801d5d3fe9cc7ec0b5fc28d98d0d2c35e1a529a5f4e3756538f5fcfdbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001d99fa827e96c3d99f2204a93baea89d19469ddb37a0b740665a3e332561b57e13463ffc560f814e6823d5ed63668b26c593da2459342241d9ada05ff0aae6ef071da9780f85428d87beec4d60ffceba4cc587aa161714a51455eeb05092dc1216dff4bf567729845bc41afa72e1798fdee3eae0893ce294937f18f0deec186e1098ad479387ed687da54d32231b0ca104e73a988ab468350e5f2c75e4235a700645113f2075ff85688c4a2776c70aa9604ec9e07367bb07dbd4ff728dd1c7ee1a0f8e85e3768c914086779b2b7b6fde23869b463c8d9d3d286fd96a277a3ead125aabb49d9fa7fa872279e18f4725b4a8c1f33f08817c50fc7ec2eb1d91901112d23f8157563469a4e4025bef3fb7768f1783b0d6b0dc159cddc7ee78b0c6282aa110eb7a3a688ac757e1ce44c426b643305ae91846a2ebef22994002b90d652eef3e6cce52339ac7959e3141e87a4d3cfdadfc5e5a07698d36ef319ec2b5111d648d908c05b12e4f4ea08ea3dd1d1bb2cf5b9911aa3101455aacc3fdc51e9130550b265470a8b938a35e3057615c6c8621c70b9d9c7636398a2b2a4241c2dd1713f0b419214f7c5c1413419dab69598a90263bb0ff9fbf4b9ffdf1013bcf5e05c252aab4462474c28ffd252745ca7a8740aa5a740d6a287ae77df06c6cfabb20f8cdd192f02b7795a7d0d19439aa86f6e9edcd47d010855013fff6d0055c481eecab592798ff28b903f5e8d97ebe94767c85339ae1d26e77e449076d9cbc881218cc33b55706947420a5a63c122edac71e3958d786699b45e839ed7579ae391555d3ed8a0f72460194031909102c5b3bb3c6dc03091070c7a1ed40bc73e1d400cdc8a35220f88eaa5f744444711186c4707ef34ad27cfb21af014ffc091ebf0bd09946b58acc65a4620770b3479d9b3d0908de90963b123bfbaaff8bd81b85282427b2b295f5b44be4f0ed70b3f7f5476d188bee949d60f81d461c092077db1536bf12fc1e75821f66e6cf2ed2479e5f9d9e8f9fd9ebdf98e4371669791f99186eeb0c232af2feae6a3d6dac80f2a153cb4c2f9855e1b29235d7a27e598e102c75a5762a22bded86e82f7acb07130f321e4e6bbd629b71900df6dde16e2a48304d1748a752e9687650d4ce18f8bf727fa6edc19c1e0d1448a3f1ff51c6505a10a1e8c51dfe124ed8638734da70c5b1c7ee6ef9f4216c218d1be81fbd6814bd14caa5a80fb83a1fc3722bd01f3bab819e8f833d997d0ae6d984cc192234d156103ba54837e7a77375cac8f9d8a026f90b0f58cd73e5f3238da0794522b6a07f1da00e53e32ba72b7c82a7b41588953704f96d456fa2ce56613ea74cf86f2c4b26b8c7a7de449aa1c45640bdb2357ae284a3ed95549417dd5c0b26d1aba35c4d179362fa282d49775ec61c519493f291cc7a40641a886ebc69cf3ceb400d1acc1d034d160659afd1b72e2acf51211670b11b5f66a93c8b7ccd011ef2e5abcfb20e686c8b8c1c55ff26f7a2a1aae40f137fbfc7b0529aedfc870954b86df17e4b0e686c8b8c1c55ff26f7a2a1aae40f137fbfc7b0529aedfc870954b86df17e4b2cebc164535821fa77abb865f76df062c46772e01fc3c651edf44083f7ed44f72e864d530c92a39c42b89da6a8462f375f4a87df86190899f5b3461c53f1828a2b0d812a41f1669ba77056f1beee202cf8ecb0a824be8a3c7c9129683105c57f1b91462af2ed35381e7d7519356cac6e5ead521edbe628ba8bbd1097304569ca2c7b152eaaa279aaf9c88c545fd97ac703e35f47cf148d534a24ef6a9051aa450000000000000000000000000000003da79b532874525925a8799c3fc47d056c000000000000000000000000000000000024972d0f7bd41f8d86d7e45eecf12c000000000000000000000000000000557f95e06aaa81e9018689e970db13eee100000000000000000000000000000000000bc58d1f83fb5f0c79f301f05952e400000000000000000000000000000057e3ed5464db44f9a76ad51ba5238338510000000000000000000000000000000000179fe494b2a2fcede87758814ba907000000000000000000000000000000c64d2feac45d41b1870abc44a7bdc0f97500000000000000000000000000000000000afd207bf26b57dd0f0a300441649d000000000000000000000000000000cbd8e219a271db511580c0aac10c43a2d2000000000000000000000000000000000024e445b1dc4b8e58f788b88040cad000000000000000000000000000000071b993db2db9740f44d5a1c258bf932dab00000000000000000000000000000000001f460cd9fe3aceabdf2c92fb8829c4000000000000000000000000000000bc01e3dc7e530bfbee082f451d66b06cf600000000000000000000000000000000001b3dbaf6c7e5b60d80eceb69a259cb000000000000000000000000000000a4050a089898ce85dba2ceb1f6a0c31a3c0000000000000000000000000000000000087b2940c10f9337a404ea4f3a21ad0000000000000000000000000000003e6db8fe8968af0062717d8627a6ed5b8c00000000000000000000000000000000001b641e744c6cb426d894bebaf4d4d100000000000000000000000000000058c4a6f9935aa79dc2bf68c0e2146b38c800000000000000000000000000000000001baf34f04c1b4c921197bf1a7b5df00000000000000000000000000000002c48f4a71373037e321c951764fc651a8800000000000000000000000000000000001b077252aae919216afd579815ad410000000000000000000000000000003659ca097d39d6acbc746f36c58cb5b10000000000000000000000000000000000002d8ebb9e4797643e90799f829023bf000000000000000000000000000000a93fac4ec10a410d7e28d657a036df531e000000000000000000000000000000000026905c0e04590b8c81e9633a75812600000000000000000000000000000072094d059ddc21972d1f92387cd046e9a1000000000000000000000000000000000024015e0290a340756cb95ed652ae13000000000000000000000000000000841580bdbaafb41d642d2f52262b793c98000000000000000000000000000000000009392086eb73ca62c93f65d3ba0e7d00000000000000000000000000000074b7c87abdee8acb92a828ed8f3c667ea80000000000000000000000000000000000255461afdc871f6712708045e5bc1d0000000000000000000000000000009014742b8145dd8b0f1b26ccc4e5908ce800000000000000000000000000000000000fa81d71bc839c20b57f80baaa5c5f00000000000000000000000000000046cfa8ccde77aa640533bbb2383e91a31b000000000000000000000000000000000023eb28c3b12d881fad76c959066c75000000000000000000000000000000bdfd61ae84633e8e144a00644eb65ddc3b00000000000000000000000000000000001ab7dbc09a2a0c1f17afa7e35d1b7700000000000000000000000000000041ad916c65339adbf00c1d4b61f5e59f96000000000000000000000000000000000000877cc5b7a4a464e1d7af4b3941a50000000000000000000000000000001f370b5fea2988b02c7d833549d0328bef0000000000000000000000000000000000235cadbd5b3c5c480a7bb34eed212a000000000000000000000000000000e89692330d929187731395de5b758e978f000000000000000000000000000000000017f5a87a2c92530f76492557eeee2a000000000000000000000000000000e04cb07d0f3ddbffba2943df96f29693fd000000000000000000000000000000000006586bc435fe4e169a544259247e390000000000000000000000000000004fade605f7e17bf56fc81bb536d9a5513500000000000000000000000000000000001ea82367a8cb08762ca63bf72c7b1700000000000000000000000000000015d2538f8f84ea56866ac063366a63a6d10000000000000000000000000000000000049675f4875e6520a4ef24fde776430000000000000000000000000000005fab9c6bde746101a4fb2ef14af782cda3000000000000000000000000000000000028758ed8835dc6807611379f0da7c10000000000000000000000000000001b81953edc5d87745df6b335ddb4720e0700000000000000000000000000000000002b4deb08482e8fa5dbf55a4abc222a00000000000000000000000000000094cd569ea21cdb68a4afc9fd9b10f8e8800000000000000000000000000000000000013bab86f983070f32a67a10379449000000000000000000000000000000c6008ff42cf222a9ca123c0bfa16523ac50000000000000000000000000000000000153148a8a1e984ac99f249c9bb7b9b00000000000000000000000000000051596470577013de7a09ac8ff06a9b9ee500000000000000000000000000000000002fd547a69ed1b97e55336734c2aeed00000000000000000000000000000071a44440361653b5b30fc82be0a1615e2e000000000000000000000000000000000028faf5aebd54cca6f6a16bc2ab95ed000000000000000000000000000000bd7734b1003703e7c783b97c071ea2138800000000000000000000000000000000002d9ae8cdf1138e9e55d5e0785f7ef70000000000000000000000000000004e1afd282330dce14737a5584b600e20f9000000000000000000000000000000000010176ffa261e230bb965053968d6b80000000000000000000000000000002d9d05ed804b7ffad8abb6f9b54f3097b200000000000000000000000000000000001470f2b7630d206456e6e5b7ed7153000000000000000000000000000000cbb9e8a54ef4a61f21070a1785290ee29d00000000000000000000000000000000001f122eb876410104aca925b2863aa2000000000000000000000000000000adfb1cd65c0100bfb60c0f4b8125eaec2f000000000000000000000000000000000019481a7371dbd7e92765e916c419a20000000000000000000000000000006ff09d50cf3e71429b111b3e4282d48dce0000000000000000000000000000000000048bb87abbec323ddb140ad579a8050000000000000000000000000000002d0071787f7c49fe951b8111465627801300000000000000000000000000000000001e237154566fc8ac4cd09f80fccba5000000000000000000000000000000c84b0f4016d48b030746d28dde32cd25d10000000000000000000000000000000000301cf5a94ec7399b7583287bf1fb15000000000000000000000000000000475af29ca089768073a20beef3c731941900000000000000000000000000000000000341e7c6e82ca059c480c5e3ec0d2e0000000000000000000000000000004742d371ec5cb4c91d0d64ca01d06e7e6000000000000000000000000000000000002a61d6938059d51d0fd95e8ba9b84b000000000000000000000000000000f7597e2e17ee1472d8d1f5f64c1ebb225200000000000000000000000000000000002f12b69c57fcaa4c449333ad4cfd3600000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000008c377bd9c14b735d7169e12327afb1281f692cde07f9954c311c8dd1ddb36530995ff4dce96f962960f2963e04bf82c1e9d703aed15a1237200e3fe2078ff1b1d433ae29325256a51791bd8d912a569c023ee155929bbe61bc6fcd717fdc4da1d48649ef9085e2324904562bee9f06648bc20fd32977441523b99321bb9862b137bc5659d89261a16d9325ff1f27599afd3fe1d8d489f90ba7fd849b48bbdbf032555018eb5b93957050eb88b8070ba1696114f8f7b2801173959a032b6e6e206678a0f1acb798a1eb403639cdf674597f4aa550fdf026fefda3b3b0e2793cf05b20a330828ee62277073b705433a4e4fadd7c9cff41aebdbc62b94850be72507ef4c25458be30d507b35a8fae877f87844d61669b8ca8f2c414d4c7483b03c21b23440209dcb4e198793a11be65c296e3c41e59b147991b0e4e59c1daaec6a0e4ac7e7c0a884e344d5e5e3e824feee413308ad25ea6ef72b67f14a924492fa262e6063e74445254f99e18d84b1b3508fdf1e7b80800270dac28cc1fe7c30ae0a9280990c833278fba3ce544725f428e84180197ab2dbe8879a387952015cae2cad0722e815952de4668c2972316cee5805c1e5768d6691df19a632d7fdbca527511965ffd75dcf57dcfec968b10c9a3520b6242234059e18a57785b1e47cdf121725553a8f586158f67e4d6168c2619a34f88aaa66f2170d04f206520fb09125ac87cd8a3aa4ffd7e7c73dc260168858d4b2d8399bbbad15404dde4596c0c40b461751d4da1f7d0b0b77803c4e7124cb4ad5b5a6e8a1f4665fa112a7778ffe1a10bd66eccf7897f0799859bfe5e89ec300553d8dbdeb7fc73f67e92d3a3bf8172265e38b902493e5fbeac0bfb7697db27f1b927314a788aacec52a394b5abe29e64023272bdfb9fb26fb2e3ebd9424eb2a2d301384dbcc843713577c3cdf6c015a61ecbc505d5b694b0e8f4955bff7b77743e11d4b34488cc5f88c29b587780000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002d6041308c857e55f9f44b6f1baed6136000000000000000000000000000000000000e179da9c116c711651e7668a4eac30000000000000000000000000000008d4ba57a84c1a048238424489e7506e3820000000000000000000000000000000000037d41c4af3f0bb08d08a239b5d1a600000000000000000000000000000095b16c6acee3572278acfcd0afe7983eff0000000000000000000000000000000000267b4e8ffa766d65c9630bc10f20da0000000000000000000000000000003372bf3a687c1de52f4850fbbabc9400b4000000000000000000000000000000000004ff525036f4989e62bb231f589c9f", // truncated for brevity
  vkeyHash:
    "0x2ab349ef31f5d516da820a3f55f93c53f9c899b0b991c93fc341199cc1e3b36c",
  name: "outer_evm_count_5",
  version: "0.4.3",
  committedInputs: {
    compare_age_evm: {
      currentDate: "20250621",
      minAge: 18,
      maxAge: 0,
    },
    bind_evm: {
      data: {
        user_address: "0x5e4b11f7b7995f5cee0134692a422b045091112f",
        custom_data: "email:test@test.com,customer_id:1234567890",
      },
    },
  },
};

function parseHexToFields(hexString: string, expectedLength: number): string[] {
  if (hexString.startsWith("0x")) {
    hexString = hexString.slice(2);
  }

  const fields: string[] = [];
  const fieldSize = 64; // 32 bytes = 64 hex chars

  for (let i = 0; i < hexString.length; i += fieldSize) {
    const chunk = hexString.slice(i, i + fieldSize);
    if (chunk.length === fieldSize) {
      fields.push("0x" + chunk);
    }
  }

  // Pad to expected length
  while (fields.length < expectedLength) {
    fields.push("0x" + "0".repeat(64));
  }

  return fields.slice(0, expectedLength);
}

(async () => {
  try {
    // Parse the existing proof
    const proofFields = parseHexToFields(proofData.proof, 456);

    const originalVerificationKey: string[] = new Array(128).fill(
      proofData.vkeyHash
    );

    // TODO: Determine the correct public input
    // This might be a hash of committedInputs or a specific value
    // For now, using placeholder - you need to determine what this should be
    const publicInput = "0x" + "0".repeat(64);

    console.log("Setting up verification circuit...");

    // Load your verification circuit
    const verificationCircuitNoir = new Noir(
      verificationCircuit as CompiledCircuit
    );
    const verificationBackend = new UltraHonkBackend(
      verificationCircuit.bytecode,
      { threads: 1 }
    );

    // Prepare inputs for your verification circuit
    const verificationInputs = {
      verification_key: originalVerificationKey,
      proof: proofFields,
      public_inputs: [publicInput],
    };

    console.log("Executing verification circuit...");

    // Execute the verification circuit
    const { witness } =
      await verificationCircuitNoir.execute(verificationInputs);

    console.log("Generating proof of verification...");

    // Generate proof that the verification was successful
    const { proof: verificationProof, publicInputs: verificationPublicInputs } =
      await verificationBackend.generateProof(witness);

    console.log("Verifying the verification proof...");

    // Verify the proof
    const verified = await verificationBackend.verifyProof({
      proof: verificationProof,
      publicInputs: verificationPublicInputs,
    });

    console.log("Verification proof verified: ", verified);
    console.log("Public inputs: ", verificationPublicInputs);

    if (verified) {
      console.log("✅ Successfully proved that the original proof is valid!");
    } else {
      console.log("❌ Failed to prove verification");
    }

    process.exit(verified ? 0 : 1);
  } catch (error) {
    console.error("Error:", error);
    process.exit(1);
  }
})();
